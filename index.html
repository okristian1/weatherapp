<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>FreeCodeCamp Weather App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css
" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.css
" type="text/css">
  <link rel="stylesheet" href="style.css" type="text/css">
  </head>
<body>
<div class="box">
  <div class="container-fluid text-center">
    <h1>FreeCodeCamp Weather App</h1>
    <br><br>
  </div>
  <div class="container-fluid text-center inner-box">
      <h1 class="city"></h1>
      <h1 class="adress"></h1>
        <h1 class="icon"></h1>
        <h1 class="summary"></h1>
      <button class="btn btn-default btn-lg currentTempF" id="F"></button>
      <h1 class="location-info">Waiting for location!</h1>
      <div class="center-block loader"></div>
      <button class="btn btn-default btn-lg currentTempC" id="C"></button>
  </div>
    </div>
  <div class = "text-center">
    <div class = "col-xs-12">
        <h3>Powered by:</h3> <img src="https://www.wunderground.com/logos/images/wundergroundLogo_4c.jpg" width="150px">
  </div>
</div>


</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js" type="text/javascript"></script>

<!-- Github pages does not allow linking to internal .js files.  -->
<script>
  //find browser lattitude and langitude
if (navigator.geolocation) 
    navigator.geolocation.getCurrentPosition(function (position) {
//query forecast using geolocation
    $("#C, .loader, .location-info").hide();
    $("#F, #C").click(function () {
        $("#C, #F").toggle();
    });

var conditions = {"Patches of Fog": "haze-weather.png", 
                   "Shallow Fog": "haze-day",
                   "Overcast": "cloudy-weather",
                   "Clear": "clear day.png",
                   "Partly Cloudy": "partly-cloudy.png",
                   "Mostly Cloudy": "mostly-cloudy.png",
                   "Scattered CLouds": "clear-day-png",
                   "Small Hail": "rain-snow-day",
                   "Squalls": "rainy-day.png",
                   "Funnel Cloud": "cloudy-weather.png",
                   "Unknown Precipitation": "rain-snow-day.png",
                   "Unknown": "unknown.png",
                 };
        
        console.log(conditions["Patches of Fog"]);
        
        $.ajax({
            url: "https://api.wunderground.com/api/a7d14009c5f69a04/geolookup/conditions/q/" + position.coords.latitude + "," + position.coords.longitude + ".json",
            dataType: "jsonp",

            success: function (r) {
                console.log(r);
                var city = r.location.country_name;
                var adress = r.current_observation.observation_location.city;
                var tempc = Math.round(r.current_observation.temp_c);
                var tempf = Math.round(r.current_observation.temp_f);
                var summary = r.current_observation.weather;                
                var icon = conditions[summary];
                console.log(icon);

                $(".city").html(city);
                $(".adress").html(adress);
                $(".currentTempC").html(tempc + "°C");
                $(".currentTempF").html(tempf + "°F");
                $(".summary").html(summary);
                $(".icon").html('<img src=icons/' + icon + ' width="120px">');
            }
        }
      );
    });
 
  </script>
  
  
</html>
